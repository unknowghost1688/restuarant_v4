<html>
<head>
    
    <!-- jQuery and jQuery Mobile -->
    <script src="lib/jquery-2.0.2.min.js"></script>
    <script src="lib/jquery.mobile-1.4.2.min.js"></script>
    <script src="lib/xmlToJason.js"></script>
    <link rel="stylesheet" href="css/jquery.mobile-1.4.2.min.css">

    <!-- Golf style and jQuery -->
    <link rel="stylesheet" href="css/restaurantStyle.css">
    <!-- Slider JS -->
    <script type="text/javascript" src="slider_js/jssor.core.js"></script>
    <script type="text/javascript" src="slider_js/jssor.utils.js"></script>
    <script type="text/javascript" src="slider_js/jssor.slider.js"></script>
    <title></title>
    <style>
		/* jssor slider arrow navigator skin 03 css */
		/*
		.jssora03l              (normal)
		.jssora03r              (normal)
		.jssora03l:hover        (normal mouseover)
		.jssora03r:hover        (normal mouseover)
		.jssora03ldn            (mousedown)
		.jssora03rdn            (mousedown)
		*/
		.jssora03l, .jssora03r, .jssora03ldn, .jssora03rdn
		{
			position: absolute;
			cursor: pointer;
			display: block;
			background: url(images/a13_new.png) no-repeat;
			overflow:hidden;
		}
		.jssora03l { background-position: -10px -33px; }
		.jssora03r { background-position: -80px -33px; }
		.jssora03l:hover { background-position: -130px -33px; }
		.jssora03r:hover { background-position: -200px -33px; }
		.jssora03ldn { background-position: -250px -33px; }
		.jssora03rdn { background-position: -320px -33px; }
	</style>
</head>
<body>

    <div data-role="page" id="page1">
        <br /><br />
        <div class="ui-login-content">
            <br />
            
			<div class="ui-content" align="center">
                
                <div class="ui-grid-b slot" id="aa">
                    <div class="ui-block-a"></div>
                    <div class="ui-block-b"></div>
                    <div class="ui-block-c">
                        <div data-role="controlgroup" data-type="horizontal">
                            <a id="createBill" href="javascript:void(0)" onClick="create_table_list_function();" data-role="button" data-corners="false" data-inline="true" data-mini="true" class="ui-page-theme-a ui-btn menu_header_menu_button_width"><span class="menu_font_size">开台</span></a>
                            <a id="btn_logout" href="javascript:void(0)" onClick="logout_function();" data-role="button" data-corners="false" data-inline="true" data-mini="true" class="ui-page-theme-a ui-btn menu_header_menu_button_width"><span class="menu_font_size">登出</span></a>
                        </div>
                    </div>
                </div>
        
                <div class="ui-grid-d slot">
                    <div class="ui-block-a" data-mini="true">
                        <div data-role="fieldcontain">
                            <label class="menu_label" for="table" style="min-width: 50px;">桌号：</label>
                            <div style="position: relative; display: block;">
                                <select id="searchTable" class="menu_input_box" onChange="table_bill_function();" data-role="none" data-mini="true" data-theme="b" data-corners="false">
                                        
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="ui-block-b">
                        <div data-role="fieldcontain">
                            <label class="menu_label" for="customerNumber" style="min-width: 50px;">人数：</label>
                            <input type="text" class="menu_input_box" id="customerNumber" data-theme="b" value="" data-clear-btn="true"  data-role="none" data-mini="true" data-corners="false"/>
                        </div>
                    </div>
                    <div class="ui-block-c">
                        <div data-role="fieldcontain">
                            <label class="menu_label" for="customerType" style="min-width: 80px;">客户类型：</label>
                            <select id="customerType" class="menu_input_box" data-role="none" data-mini="true" data-theme="b" data-corners="false" onchange="change_customerType();">
                                <option value="V">普通客</option>
                                <option value="M">会员</option>
                                <option value="R">酒店客</option>
                                <option value="S">员工</option>
                                <option value="O">其他</option>
                            </select>
                        </div>
                    </div>
                    <div class="ui-block-d">
                        <div data-role="fieldcontain">
                            <label class="menu_label" for="merberId" style="min-width: 70px;">会员号：</label>
                            <input type="text" class="menu_input_box" id="merberId" data-theme="b" value=""  data-role="none" data-mini="true" data-corners="false">
                        </div>
                    </div>
                    <div class="ui-block-e">
                        <div data-role="fieldcontain">
                            <a id="orderPanel" href="javascript:void(0)" onClick="order_panel();" rel="external" data-ajax="false" data-role="button" data-corners="false" data-icon="check" data-inline="true" data-mini="true" class="ui-page-theme-a ui-btn menu_header_menu_order_pannel_button_width"><span class="menu_font_size">已选菜肴</span></a>
                        </div>
                    </div>
                </div>
				<!-- Jssor Slider Begin -->
				<!-- You can move inline styles (except 'top', 'left', 'width' and 'height') to css file or css block. -->
				<div id="slider1_container" style="position: relative; width: 560px; height: 60px;">
                        
				</div>
				<!-- Jssor Slider End -->
                    
                <div class="ui-grid-b slot" id="div_menu_items">

                </div>

                <div id="div_order" data-role="popup">
                    <a href="#" data-rel="back" data-role="button" data-theme="a" data-icon="delete" data-iconpos="notext" class="ui-btn-left">Close</a>
                    <table data-role="table" id="order_table" data-mode="" class="ui-responsive condiment_tbl">
                        <thead>
                            <tr>
                                <th id="th_orderLeft_Pic" class="orderLeft_Pic" rowspan="5">
                                    &nbsp;&nbsp;
                                </th>
                                <th>
                                    请输入菜品数量: &nbsp;&nbsp; <input type="text" class="menu_input_box" id="txtCount" value="" data-role="none" data-mini="true" data-theme="b" data-corners="false">
                                </th>
                            </tr>
                            <tr>
                                <th>
                                    <span id="condiment_title" class="condiment_title"></span>
                                    <span id="condiment_price" class="condiment_price"></span>
                                </th>
                            </tr>
                            <tr>
                                <th>
                                    <span id="item_descs"></span>
                                </th>
                            </tr>
                            <tr>
                                <th>
                                    &nbsp;
                                </th>
                            </tr>
                            <tr>
                                <th>
                                    <a id="confirm" data-corners="false" data-inline="true" data-mini="true" data-theme="f" data-role="button" data-shadow="true" data-iconshadow="true" data-wrapperels="span" onClick="create_order_item_function();">
                                        <span class="ui-btn-inner">
                                            <span class="ui-btn-text">确定</span>
                                        </span>
                                    </a> 

                                    &nbsp;&nbsp;

                                    <a id="cancel" data-rel="back" data-corners="false" data-inline="true" data-mini="true" data-theme="f" data-role="button" data-shadow="true" data-iconshadow="true" data-wrapperels="span">
                                        <span class="ui-btn-inner">
                                            <span class="ui-btn-text">取消</span>
                                        </span>
                                    </a> 
                                </th>
                            </tr>    
                        </thead>
                    </table>
                </div>
			</div>
            <br />
        </div>
    </div>
    <div class="app">
        <div id="deviceready" class="blink">
            <p class="event listening"></p>
            <p class="event received"></p>
        </div>
    </div>

</body>
</html>

<script type="text/javascript">
    var table_list_arr = [];
    var table_descs_arr = [];
    var item_info = [];
    var item_info_cd = [];

    function order_panel() {
        localStorage["item_info"] = JSON.stringify(item_info);
        localStorage["item_info_cd"] = JSON.stringify(item_info_cd);
        
        window.location.href = "order_panel.html";
    }

    function pass_order(item_cd, descs, item_desc, uom_cd, picture_name, visitor_price, member_price, room_price, staff_price, stockstatus, customerType, item_price, by_weight) {
        localStorage.setItem("item_item_cd", item_cd);
        localStorage.setItem("item_descs", descs);
        localStorage.setItem("item_item_desc", item_desc);
        localStorage.setItem("item_uom_cd", uom_cd);
        localStorage.setItem("item_picture_name", picture_name);
        localStorage.setItem("item_visitor_price", visitor_price);
        localStorage.setItem("item_member_price", member_price);
        localStorage.setItem("item_room_price", room_price);
        localStorage.setItem("item_staff_price", staff_price);
        localStorage.setItem("item_stockstatus", stockstatus);
        localStorage.setItem("item_customerType", customerType);
        localStorage.setItem("item_price", item_price);
        if (by_weight == "N") {
            by_weight = 0;
        }
        localStorage.setItem("by_weight", by_weight);

        var pic = picture_name.substr(picture_name.length - 5);

        $("#condiment_title").html(descs);
        $("#condiment_price").html('RM ' + item_price);
        $("#item_descs").html(item_desc);

        $('#th_orderLeft_Pic').css("background-image", "url(images/" + pic + ")");
        $("#div_order").popup("open");
    }

    function change_major(major_cd) {
        var previuos_major_cd = localStorage.getItem('mealmajor');
        //$("#" + previuos_major_cd).removeClass('onselect_menu_type_style');
        //$("#" + previuos_major_cd).css('background', '#f9f9f9');
        $("#" + previuos_major_cd).css({
            color: '#000000',
            background: '#f9f9f9',
            'text-decoration': 'none',
            border: 0
        });
        
        localStorage.setItem("mealmajor", major_cd);
        //$("#" + major_cd).addClass('onselect_menu_type_style');
        //$("#" + major_cd).css('background', '#BF6C0E');
        $("#" + major_cd).css({
            color: '#FFFFFF',
            background: '#EC494A',
            'text-decoration': 'none',
            border: 0
        });

        //$("#" + major_cd).toggleClass('selected_menu_type_style');
        if (major_cd == "Salable") {
            getoutlet_meal_popular_menu();
        } else {
            getoutlet_meal_major_menu();
        }
    }

    function change_customerType() {
        var mealmajor = localStorage.getItem('mealmajor');
        
        if (mealmajor == "Salable") {
            getoutlet_meal_popular_menu();
        } else {
            getoutlet_meal_major_menu();
        }
    }

    function getoutlet_meal_majorList() {
        var outlet = localStorage.getItem('outlet');
        var mealperiod = localStorage.getItem('mealperiod');
        var wsUrl_get_outlet_meal_major_list = "http://175.139.183.59:1002/webservice_posv5/n_webservice_posv5.asmx?op=of_get_outlet_meal_major";

        var soapRequest_get_outlet_meal_major_list =
            '<?xml version="1.0" encoding="utf-8"?> \
				<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"> \
				  <soap:Body> \
					<of_get_outlet_meal_major xmlns="http://tempurl.org"> \
					  <as_outlet_cd>' + outlet + '</as_outlet_cd> \
					  <as_meal_cd>' + mealperiod + '</as_meal_cd> \
					</of_get_outlet_meal_major> \
				  </soap:Body> \
				</soap:Envelope>';

        $.ajax({
            type: "POST",
            url: wsUrl_get_outlet_meal_major_list,
            contentType: "text/xml",
            dataType: "xml",
            data: soapRequest_get_outlet_meal_major_list,
            success: function (xmlHttpRequest, status, req) {
                // creates object instance of XMLtoJSON
                var xml2json = new XMLtoJSON();
                var decoded_get_outlet_meal_major_list = $("<div/>").html(req.responseText).text();
                var strjson_get_outlet_meal_major_list = xml2json.fromStr(decoded_get_outlet_meal_major_list, 'string');
                var parse_strjson_get_outlet_meal_major_list = jQuery.parseJSON(strjson_get_outlet_meal_major_list);
                var select_get_outlet_meal_major_list = $('#slider1_container');
                var outlet_meal_major_list_collection = [];
                var outlet_meal_major_list_join = "";
                var sel_mealmajor = "";
                var count_mealmajor = 0;

                //remove all option before added in new one
                select_get_outlet_meal_major_list.html();
                
                outlet_meal_major_list_collection.push('<!-- Loading Screen -->');
                outlet_meal_major_list_collection.push('<div u="loading" style="position: absolute; top: 0px; left: 0px;">');
                outlet_meal_major_list_collection.push('<div style="filter: alpha(opacity=70); opacity:0.7; position: absolute; display: block;');
                outlet_meal_major_list_collection.push('background-color: #000; top: 0px; left: 0px;width: 100%;height:100%;">');
                outlet_meal_major_list_collection.push('</div>');
                outlet_meal_major_list_collection.push('<div style="position: absolute; display: block; background: url(images/loading.gif) no-repeat center center;');
                outlet_meal_major_list_collection.push('top: 0px; left: 0px;width: 100%;height:100%;">');
                outlet_meal_major_list_collection.push('</div>');
                outlet_meal_major_list_collection.push('</div>');

                outlet_meal_major_list_collection.push('<!-- Slides Container -->');
                outlet_meal_major_list_collection.push('<div u="slides" id="menuPanel" style="cursor: move; position: absolute; width: 470px; height:55px; overflow: hidden; margin: 0px 45px 0px 35px;">');
                outlet_meal_major_list_collection.push('<div><a id="Salable" data-role="button" class="ui-page-theme-a ui-btn menu_type_style" href="javascript:void(0)" onClick="change_major(\'Salable\');"><span class="menu_type_size" >热销菜品</span></a></div>');
							
                $.each(parse_strjson_get_outlet_meal_major_list['ds_pm_major']['ds_pm_major_row'], function () {
                    //var outlet_meal_major_list = '<option value="' + this['major_cd']['#text'] + '">' + this['desc']['#text'] + '</option>';
                    if (count_mealmajor == 0) {
                        sel_mealmajor = $.trim(this['major_cd']['#text']);
                    }
                    var outlet_meal_major_list = '<div ><a id="' + $.trim(this['major_cd']['#text']) + '" data-role="button" class="ui-page-theme-a ui-btn menu_type_style" href="javascript:void(0)" onClick="change_major(\'' + this['major_cd']['#text'] + '\')"><span class="menu_type_size">' + this['descs']['#text'] + '</span></a></div>';
                    outlet_meal_major_list_collection.push(outlet_meal_major_list);
                    count_mealmajor++;
                });

                outlet_meal_major_list_collection.push('</div>');
                
                outlet_meal_major_list_collection.push('<!-- Arrow Navigator Skin Begin -->');
                outlet_meal_major_list_collection.push('<!-- Arrow Left -->');
                outlet_meal_major_list_collection.push('<span u="arrowleft" class="jssora03l" style="width: 30px; height: 30px; left: 0px;">');
                outlet_meal_major_list_collection.push('</span>');
                outlet_meal_major_list_collection.push('<!-- Arrow Right -->');
                outlet_meal_major_list_collection.push('<span u="arrowright" class="jssora03r" style="width: 30px; height: 30px; right: 16px;">');
                outlet_meal_major_list_collection.push('</span>');
                outlet_meal_major_list_collection.push('<!-- Arrow Navigator Skin End -->');

                //$("#slider1_container").trigger("remove");
                outlet_meal_major_list_join = outlet_meal_major_list_collection.join("");
                select_get_outlet_meal_major_list.html(outlet_meal_major_list_join);
                $("#slider1_container").trigger("create");
                var jssor_slider1 = new $JssorSlider$("slider1_container", options);

                localStorage.setItem("mealmajor", sel_mealmajor);
                //$("#" + sel_mealmajor).addClass('onselect_menu_type_style');
                //$("#" + sel_mealmajor).css('background', '#BF6C0E');
                $("#" + sel_mealmajor).css({
                    color: '#FFFFFF',
                    background: '#EC494A',
                    'text-decoration': 'none !important',
                    border: 0
                });


                getoutlet_meal_major_menu();
            },
            error: function (data, status) {
                alert(data.responseText);
            }
        });
    }

    function getoutlet_meal_major_menu() {
        
        var SelectedcustomerType = $("#customerType :selected").val();
        var outlet = localStorage.getItem('outlet');
        var mealperiod = localStorage.getItem('mealperiod');
        var mealmajor = localStorage.getItem('mealmajor');
        var wsUrl_get_outlet_meal_major_menu = "http://175.139.183.59:1002/webservice_posv5/n_webservice_posv5.asmx?op=of_get_outlet_meal_major_menu";

        var soapRequest_get_outlet_meal_major_menu =
            '<?xml version="1.0" encoding="utf-8"?> \
			<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"> \
			  <soap:Body> \
				<of_get_outlet_meal_major_menu xmlns="http://tempurl.org"> \
				  <as_outlet_cd>' + outlet + '</as_outlet_cd> \
				  <as_meal_cd>' + mealperiod + '</as_meal_cd> \
				  <as_major_cd>' + mealmajor + '</as_major_cd> \
				</of_get_outlet_meal_major_menu> \
			  </soap:Body> \
			</soap:Envelope>';

        $.ajax({
            type: "POST",
            url: wsUrl_get_outlet_meal_major_menu,
            contentType: "text/xml",
            dataType: "xml",
            data: soapRequest_get_outlet_meal_major_menu,
            success: function (xmlHttpRequest, status, req) {
                // creates object instantce of XMLtoJSON
                var xml2json = new XMLtoJSON();
                var decoded_get_outlet_meal_major_menu = $("<div/>").html(req.responseText).text();
                var strjson_get_outlet_meal_major_menu = xml2json.fromStr(decoded_get_outlet_meal_major_menu, 'string');
                if (strjson_get_outlet_meal_major_menu == "Invalid XML format") {
                    var decoded_get_outlet_meal_major_menu_arr = decoded_get_outlet_meal_major_menu.split("|");
                    var select_get_outlet_meal_major_menu = $('#div_menu_items');
                    select_get_outlet_meal_major_menu.html('');
                    select_get_outlet_meal_major_menu.html('<br/><br/>'+decoded_get_outlet_meal_major_menu_arr[1]);
                    $("#div_menu_items").trigger("create");
                } else {
                    var parse_strjson_get_outlet_meal_major_menu = jQuery.parseJSON(strjson_get_outlet_meal_major_menu);
                    var select_get_outlet_meal_major_menu = $('#div_menu_items');
                    var outlet_meal_major_menu_collection = [];
                    var outlet_meal_major_menu_join = "";
                    var count_mealItem = 0;
                    var div_block = "";
                    var item_price = 0;

                    //remove all option before added in new one
                    select_get_outlet_meal_major_menu.html('');
                    if (typeof parse_strjson_get_outlet_meal_major_menu['ds_pm_major_item_list']['ds_pm_major_item_list_row'][0] != 'undefined') {
                        $.each(parse_strjson_get_outlet_meal_major_menu['ds_pm_major_item_list']['ds_pm_major_item_list_row'], function () {
                            //var outlet_meal_major_menu = '<option value="' + this['major_cd']['#text'] + '">' + this['desc']['#text'] + '</option>';

                            if (count_mealItem % 3 == 0) {
                                div_block = "a";
                            } else if (count_mealItem % 3 == 1) {
                                div_block = "b";
                            } else if (count_mealItem % 3 == 2) {
                                div_block = "c";
                            }

                            if (SelectedcustomerType == "v") {
                                item_price = this['visitor_price']['#text'];
                            } else if (SelectedcustomerType == "M") {
                                item_price = this['member_price']['#text'];
                            } else if (SelectedcustomerType == "R") {
                                item_price = this['room_price']['#text'];
                            } else if (SelectedcustomerType == "S") {
                                item_price = this['staff_price']['#text'];
                            } else {
                                item_price = this['visitor_price']['#text'];
                            }

                            var item_cd = this['item_cd']['#text'];
                            var descs = this['descs']['#text'];
                            var item_desc = this['item_desc']['#text'];
                            var uom_cd = this['uom_cd']['#text'];
                            var picture_name = this['picture_name']['#text'];
                            var visitor_price = this['visitor_price']['#text'];
                            var member_price = this['member_price']['#text'];
                            var room_price = this['room_price']['#text'];
                            var staff_price = this['staff_price']['#text'];
                            var stockstatus = this['stockstatus']['#text']; 
                            var by_weight = this['by_weight']['#text'];

                            var outlet_meal_major_menu = '<div class="ui-block-' + div_block + '" id="div_' + item_cd + '"> \
                            <div data-role="controlgroup" data-type="horizontal"> \
                            <a href="javascript:void(0)" onClick="pass_order(\'' + item_cd + '\', \'' + descs + '\', \'' + item_desc + '\', \'' + uom_cd + '\', \'' + picture_name + '\', \'' + visitor_price + '\', \'' + member_price + '\', \'' + room_price + '\', \'' + staff_price + '\', \'' + stockstatus + '\', \'' + SelectedcustomerType + '\', \'' + parseFloat(item_price).toFixed(2) + '\', \'' + by_weight + '\');" data-role="button" class="ui-page-theme-a ui-btn menu_width"><span class="menu_font_size">' + descs + '</span></a> \
                            <a href="javascript:void(0)" onClick="pass_order(\'' + item_cd + '\', \'' + descs + '\', \'' + item_desc + '\', \'' + uom_cd + '\', \'' + picture_name + '\', \'' + visitor_price + '\', \'' + member_price + '\', \'' + room_price + '\', \'' + staff_price + '\', \'' + stockstatus + '\', \'' + SelectedcustomerType + '\', \'' + parseFloat(item_price).toFixed(2) + '\', \'' + by_weight + '\');" data-role="button" class="ui-page-theme-a ui-btn menu_price_width"><span class="menu_font_size">' + parseFloat(item_price).toFixed(2) + ' /' + uom_cd + '</span></a> \
                            </div> \
                            </div>';

                            outlet_meal_major_menu_collection.push(outlet_meal_major_menu);
                            count_mealItem++;
                        });
                    } else {

                        if (SelectedcustomerType == "v") {
                            item_price = parse_strjson_get_outlet_meal_major_menu['ds_pm_major_item_list']['ds_pm_major_item_list_row']['visitor_price']['#text'];
                        } else if (SelectedcustomerType == "M") {
                            item_price = parse_strjson_get_outlet_meal_major_menu['ds_pm_major_item_list']['ds_pm_major_item_list_row']['member_price']['#text'];
                        } else if (SelectedcustomerType == "R") {
                            item_price = parse_strjson_get_outlet_meal_major_menu['ds_pm_major_item_list']['ds_pm_major_item_list_row']['room_price']['#text'];
                        } else if (SelectedcustomerType == "S") {
                            item_price = parse_strjson_get_outlet_meal_major_menu['ds_pm_major_item_list']['ds_pm_major_item_list_row']['staff_price']['#text'];
                        } else {
                            item_price = parse_strjson_get_outlet_meal_major_menu['ds_pm_major_item_list']['ds_pm_major_item_list_row']['visitor_price']['#text'];
                        }

                        var item_cd = parse_strjson_get_outlet_meal_major_menu['ds_pm_major_item_list']['ds_pm_major_item_list_row']['item_cd']['#text'];
                        var descs = parse_strjson_get_outlet_meal_major_menu['ds_pm_major_item_list']['ds_pm_major_item_list_row']['descs']['#text'];
                        var item_desc = parse_strjson_get_outlet_meal_major_menu['ds_pm_major_item_list']['ds_pm_major_item_list_row']['item_desc']['#text'];
                        var uom_cd = parse_strjson_get_outlet_meal_major_menu['ds_pm_major_item_list']['ds_pm_major_item_list_row']['uom_cd']['#text'];
                        var picture_name = parse_strjson_get_outlet_meal_major_menu['ds_pm_major_item_list']['ds_pm_major_item_list_row']['picture_name']['#text'];
                        var visitor_price = parse_strjson_get_outlet_meal_major_menu['ds_pm_major_item_list']['ds_pm_major_item_list_row']['visitor_price']['#text'];
                        var member_price = parse_strjson_get_outlet_meal_major_menu['ds_pm_major_item_list']['ds_pm_major_item_list_row']['member_price']['#text'];
                        var room_price = parse_strjson_get_outlet_meal_major_menu['ds_pm_major_item_list']['ds_pm_major_item_list_row']['room_price']['#text'];
                        var staff_price = parse_strjson_get_outlet_meal_major_menu['ds_pm_major_item_list']['ds_pm_major_item_list_row']['staff_price']['#text'];
                        var stockstatus = parse_strjson_get_outlet_meal_major_menu['ds_pm_major_item_list']['ds_pm_major_item_list_row']['stockstatus']['#text'];
                        var by_weight = parse_strjson_get_outlet_meal_major_menu['ds_pm_major_item_list']['ds_pm_major_item_list_row']['by_weight']['#text'];
                        
                        var outlet_meal_major_menu = '<div class="ui-block-a" id="div_' + item_cd + '"> \
                            <div data-role="controlgroup" data-type="horizontal"> \
                            <a href="javascript:void(0)" onClick="pass_order(\'' + item_cd + '\', \'' + descs + '\', \'' + item_desc + '\', \'' + uom_cd + '\', \'' + picture_name + '\', \'' + visitor_price + '\', \'' + member_price + '\', \'' + room_price + '\', \'' + staff_price + '\', \'' + stockstatus + '\', \'' + SelectedcustomerType + '\', \'' + parseFloat(item_price).toFixed(2) + '\', \'' + by_weight + '\');" data-role="button" class="ui-page-theme-a ui-btn menu_width"><span class="menu_font_size">' + descs + '</span></a> \
                            <a href="javascript:void(0)" onClick="pass_order(\'' + item_cd + '\', \'' + descs + '\', \'' + item_desc + '\', \'' + uom_cd + '\', \'' + picture_name + '\', \'' + visitor_price + '\', \'' + member_price + '\', \'' + room_price + '\', \'' + staff_price + '\', \'' + stockstatus + '\', \'' + SelectedcustomerType + '\', \'' + parseFloat(item_price).toFixed(2) + '\', \'' + by_weight + '\');" data-role="button" class="ui-page-theme-a ui-btn menu_price_width"><span class="menu_font_size">' + parseFloat(item_price).toFixed(2) + ' /' + uom_cd + '</span></a> \
                            </div> \
                            </div>';

                        outlet_meal_major_menu_collection.push(outlet_meal_major_menu);
                    }

                    outlet_meal_major_menu_join = outlet_meal_major_menu_collection.join("");
                    select_get_outlet_meal_major_menu.html(outlet_meal_major_menu_join);
                    $("#div_menu_items").trigger("create");
                }
            },
            error: function (data, status) {
                alert(data.responseText);
            }
        });
    }

    function getoutlet_meal_popular_menu() {

        var SelectedcustomerType = $("#customerType :selected").val();
        var outlet = localStorage.getItem('outlet');
        var mealperiod = localStorage.getItem('mealperiod');
        var wsUrl_get_outlet_meal_popular_menu = "http://175.139.183.59:1002/webservice_posv5/n_webservice_posv5.asmx?op=of_get_outlet_meal_popular_menu";

        var soapRequest_get_outlet_meal_popular_menu =
            '<?xml version="1.0" encoding="utf-8"?> \
			<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"> \
			  <soap:Body> \
				<of_get_outlet_meal_popular_menu xmlns="http://tempurl.org"> \
				  <as_outlet_cd>' + outlet + '</as_outlet_cd> \
				  <as_meal_cd>' + mealperiod + '</as_meal_cd> \
				</of_get_outlet_meal_popular_menu> \
			  </soap:Body> \
			</soap:Envelope>';

        $.ajax({
            type: "POST",
            url: wsUrl_get_outlet_meal_popular_menu,
            contentType: "text/xml",
            dataType: "xml",
            data: soapRequest_get_outlet_meal_popular_menu,
            success: function (xmlHttpRequest, status, req) {
                // creates object instantce of XMLtoJSON
                var xml2json = new XMLtoJSON();
                var decoded_get_outlet_meal_popular_menu = $("<div/>").html(req.responseText).text();
                var strjson_get_outlet_meal_popular_menu = xml2json.fromStr(decoded_get_outlet_meal_popular_menu, 'string');
                
                if (strjson_get_outlet_meal_popular_menu == "Invalid XML format") {
                    var decoded_get_outlet_meal_popular_menu_arr = decoded_get_outlet_meal_popular_menu.split("|");
                    var select_get_outlet_meal_popular_menu = $('#div_menu_items');
                    select_get_outlet_meal_popular_menu.html('');
                    select_get_outlet_meal_popular_menu.html('<br/><br/>' + decoded_get_outlet_meal_popular_menu_arr[1]);
                    $("#div_menu_items").trigger("create");
                } else {
                    var parse_strjson_get_outlet_meal_popular_menu = jQuery.parseJSON(strjson_get_outlet_meal_popular_menu);
                    var select_get_outlet_meal_popular_menu = $('#div_menu_items');
                    var outlet_meal_popular_menu_collection = [];
                    var outlet_meal_popular_menu_join = "";
                    var count_mealItem = 0;
                    var div_block = "";
                    var item_price = 0;

                    //remove all option before added in new one
                    select_get_outlet_meal_popular_menu.html('');
                    if (typeof parse_strjson_get_outlet_meal_popular_menu['ds_pm_popular_item_list']['ds_pm_popular_item_list_row'][0] != 'undefined') {
                        $.each(parse_strjson_get_outlet_meal_popular_menu['ds_pm_popular_item_list']['ds_pm_popular_item_list_row'], function () {
                            //var outlet_meal_popular_menu = '<option value="' + this['major_cd']['#text'] + '">' + this['desc']['#text'] + '</option>';

                            if (count_mealItem % 3 == 0) {
                                div_block = "a";
                            } else if (count_mealItem % 3 == 1) {
                                div_block = "b";
                            } else if (count_mealItem % 3 == 2) {
                                div_block = "c";
                            }

                            if (SelectedcustomerType == "v") {
                                item_price = this['visitor_price']['#text'];
                            } else if (SelectedcustomerType == "M") {
                                item_price = this['member_price']['#text'];
                            } else if (SelectedcustomerType == "R") {
                                item_price = this['room_price']['#text'];
                            } else if (SelectedcustomerType == "S") {
                                item_price = this['staff_price']['#text'];
                            } else {
                                item_price = this['visitor_price']['#text'];
                            }

                            var item_cd = this['item_cd']['#text'];
                            var descs = this['descs']['#text'];
                            var item_desc = this['item_desc']['#text'];
                            var uom_cd = this['uom_cd']['#text'];
                            var picture_name = this['picture_name']['#text'];
                            var visitor_price = this['visitor_price']['#text'];
                            var member_price = this['member_price']['#text'];
                            var room_price = this['room_price']['#text'];
                            var staff_price = this['staff_price']['#text'];
                            var by_weight = "";
                            if (typeof this['by_weight'] != 'undefined') {
                                by_weight = this['by_weight']['#text'];
                            }
                            var stockstatus = "";

                            var outlet_meal_popular_menu = '<div class="ui-block-' + div_block + '" id="div_' + this['item_cd']['#text'] + '"> \
                            <div data-role="controlgroup" data-type="horizontal"> \
                            <a href="javascript:void(0)" onClick="pass_order(\'' + item_cd + '\', \'' + descs + '\', \'' + item_desc + '\', \'' + uom_cd + '\', \'' + picture_name + '\', \'' + visitor_price + '\', \'' + member_price + '\', \'' + room_price + '\', \'' + staff_price + '\', \'' + stockstatus + '\', \'' + SelectedcustomerType + '\', \'' + parseFloat(item_price).toFixed(2) + '\', \'' + by_weight + '\');" data-role="button" class="ui-page-theme-a ui-btn menu_width"><span class="menu_font_size">' + this['descs']['#text'] + '</span></a> \
                            <a href="javascript:void(0)" onClick="pass_order(\'' + item_cd + '\', \'' + descs + '\', \'' + item_desc + '\', \'' + uom_cd + '\', \'' + picture_name + '\', \'' + visitor_price + '\', \'' + member_price + '\', \'' + room_price + '\', \'' + staff_price + '\', \'' + stockstatus + '\', \'' + SelectedcustomerType + '\', \'' + parseFloat(item_price).toFixed(2) + '\', \'' + by_weight + '\');" data-role="button" class="ui-page-theme-a ui-btn menu_price_width"><span class="menu_font_size">' + parseFloat(item_price).toFixed(2) + ' /' + this['uom_cd']['#text'] + '</span></a> \
                            </div> \
                            </div>';

                            outlet_meal_popular_menu_collection.push(outlet_meal_popular_menu);
                            count_mealItem++;
                        });
                    } else {

                        if (SelectedcustomerType == "v") {
                            item_price = parse_strjson_get_outlet_meal_popular_menu['ds_pm_popular_item_list']['ds_pm_popular_item_list_row']['visitor_price']['#text'];
                        } else if (SelectedcustomerType == "M") {
                            item_price = parse_strjson_get_outlet_meal_popular_menu['ds_pm_popular_item_list']['ds_pm_popular_item_list_row']['member_price']['#text'];
                        } else if (SelectedcustomerType == "R") {
                            item_price = parse_strjson_get_outlet_meal_popular_menu['ds_pm_popular_item_list']['ds_pm_popular_item_list_row']['room_price']['#text'];
                        } else if (SelectedcustomerType == "S") {
                            item_price = parse_strjson_get_outlet_meal_popular_menu['ds_pm_popular_item_list']['ds_pm_popular_item_list_row']['staff_price']['#text'];
                        } else {
                            item_price = parse_strjson_get_outlet_meal_popular_menu['ds_pm_popular_item_list']['ds_pm_popular_item_list_row']['visitor_price']['#text'];
                        }

                        var item_cd = parse_strjson_get_outlet_meal_popular_menu['ds_pm_popular_item_list']['ds_pm_popular_item_list_row']['item_cd']['#text'];
                        var descs = parse_strjson_get_outlet_meal_popular_menu['ds_pm_popular_item_list']['ds_pm_popular_item_list_row']['descs']['#text'];
                        var item_desc = parse_strjson_get_outlet_meal_popular_menu['ds_pm_popular_item_list']['ds_pm_popular_item_list_row']['item_desc']['#text'];
                        var uom_cd = parse_strjson_get_outlet_meal_popular_menu['ds_pm_popular_item_list']['ds_pm_popular_item_list_row']['uom_cd']['#text'];
                        var picture_name = parse_strjson_get_outlet_meal_popular_menu['ds_pm_popular_item_list']['ds_pm_popular_item_list_row']['picture_name']['#text'];
                        var visitor_price = parse_strjson_get_outlet_meal_popular_menu['ds_pm_popular_item_list']['ds_pm_popular_item_list_row']['visitor_price']['#text'];
                        var member_price = parse_strjson_get_outlet_meal_popular_menu['ds_pm_popular_item_list']['ds_pm_popular_item_list_row']['member_price']['#text'];
                        var room_price = parse_strjson_get_outlet_meal_popular_menu['ds_pm_popular_item_list']['ds_pm_popular_item_list_row']['room_price']['#text'];
                        var staff_price = parse_strjson_get_outlet_meal_popular_menu['ds_pm_popular_item_list']['ds_pm_popular_item_list_row']['staff_price']['#text'];
                        var by_weight = parse_strjson_get_outlet_meal_popular_menu['ds_pm_popular_item_list']['ds_pm_popular_item_list_row']['by_weight']['#text'];

                        var stockstatus = "";

                        var outlet_meal_popular_menu = '<div class="ui-block-a" id="div_' + parse_strjson_get_outlet_meal_popular_menu['ds_pm_popular_item_list']['ds_pm_popular_item_list_row']['item_cd']['#text'] + '"> \
                            <div data-role="controlgroup" data-type="horizontal"> \
                            <a href="javascript:void(0)" onClick="pass_order(\'' + item_cd + '\', \'' + descs + '\', \'' + item_desc + '\', \'' + uom_cd + '\', \'' + picture_name + '\', \'' + visitor_price + '\', \'' + member_price + '\', \'' + room_price + '\', \'' + staff_price + '\', \'' + stockstatus + '\', \'' + SelectedcustomerType + '\', \'' + parseFloat(item_price).toFixed(2) + '\', \'' + by_weight + '\');" data-role="button" class="ui-page-theme-a ui-btn menu_width"><span class="menu_font_size">' + parse_strjson_get_outlet_meal_popular_menu['ds_pm_popular_item_list']['ds_pm_popular_item_list_row']['descs']['#text'] + '</span></a> \
                            <a href="javascript:void(0)" onClick="pass_order(\'' + item_cd + '\', \'' + descs + '\', \'' + item_desc + '\', \'' + uom_cd + '\', \'' + picture_name + '\', \'' + visitor_price + '\', \'' + member_price + '\', \'' + room_price + '\', \'' + staff_price + '\', \'' + stockstatus + '\', \'' + SelectedcustomerType + '\', \'' + parseFloat(item_price).toFixed(2) + '\', \'' + by_weight + '\');" data-role="button" class="ui-page-theme-a ui-btn menu_price_width"><span class="menu_font_size">' + parseFloat(item_price).toFixed(2) + ' /' + parse_strjson_get_outlet_meal_popular_menu['ds_pm_popular_item_list']['ds_pm_popular_item_list_row']['uom_cd']['#text'] + '</span></a> \
                            </div> \
                            </div>';

                        outlet_meal_popular_menu_collection.push(outlet_meal_popular_menu);
                    }

                    outlet_meal_popular_menu_join = outlet_meal_popular_menu_collection.join("");
                    select_get_outlet_meal_popular_menu.html(outlet_meal_popular_menu_join);
                    $("#div_menu_items").trigger("create");
                }
            },
            error: function (data, status) {
                alert(data.responseText);
            }
        });
    }

    function getTableList() {
        /// <summary>
        /// 根据区域获取餐桌列表
        /// </summary>
        /// <param name="as_outlet_cd">销售点代码</param>
        /// <param name="as_location_cd">区域代码 如果输入%,则返回销售点全部区域的餐桌</param>
        /// <param name="as_table_status"> 1:空台可用;2:占用; 餐桌状态如果输入%,则返回所有状态的餐桌</param>
        /// <returns>餐桌列表</returns>

        var outlet = localStorage.getItem('outlet');
        var location = '%';
        var wsUrl_get_table_list = "http://175.139.183.59:1002/webservice_posv5/n_webservice_posv5.asmx?op=of_get_table_list";
            
        var soapRequest_get_table_list =
            '<?xml version="1.0" encoding="utf-8"?> \
				<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"> \
					<soap:Body> \
					<of_get_table_list xmlns="http://tempurl.org"> \
						<as_outlet_cd>' + outlet + '</as_outlet_cd> \
						<as_location_cd>' + location + '</as_location_cd> \
						<as_table_status>%</as_table_status> \
					</of_get_table_list> \
					</soap:Body> \
				</soap:Envelope>';
            
        $.ajax({
            type: "POST",
            url: wsUrl_get_table_list,
            contentType: "text/xml",
            dataType: "xml",
            data: soapRequest_get_table_list,
            success: function (xmlHttpRequest, status, req) {
                // creates object instantce of XMLtoJSON
                var xml2json = new XMLtoJSON();
                var decoded_get_table_list = $("<div/>").html(req.responseText).text();
                    
                var strjson_get_table_list = xml2json.fromStr(decoded_get_table_list, 'string');
                var parse_strjson_get_table_list = jQuery.parseJSON(strjson_get_table_list);
                var select_get_table_list = $('#searchTable');
                    
                $.each(parse_strjson_get_table_list['ds_pm_table']['ds_pm_table_row'], function () {
                    var table_status = "";
                    if (this['status']['#text'] == 1) {
                        table_status = "空台";
                    } else if (this['status']['#text'] == 2) {
                        table_status = "占用";
                    }

                    var table_list = '<option value="' + this['table_cd']['#text'] + '">' + this['descs']['#text'] + ' ' + table_status + '</option>';
                    select_get_table_list.append(table_list);
                });

                $("#searchTable").trigger("change");
            },
            error: function (data, status) {
                alert(data.responseText);
            }
        });
    }

    function table_bill_function() {
        /// <summary>
        /// 根据销售点、餐桌、营业日期获取单据信息
        /// </summary>
        /// <param name="as_outlet_cd">销售点代码</param>
        /// <param name="stas_table_cd">餐桌代码</param>
        /// <param name="adt_doc_date">营业日期</param>
        /// <param name="as_status">A:有效;P:已付款 ;C:已关闭 ;X :已取消;%:所有</param>
        /// <returns>bill_no , table_cd ,cover ,cust_type ,成功member_id ,waiter_cd ,sub_amt ,remarks,status(餐桌代码,人数,顾客类型,会员号码,服务员,消费合计,菜单备注,状态)</returns>

        var outlet = localStorage.getItem('outlet');
        var SelectedsearchTable = $("#searchTable :selected").val();
        
        var wsUrl_get_table_bill_list = "http://175.139.183.59:1002/webservice_posv5/n_webservice_posv5.asmx?op=of_get_table_bill";

        var soapRequest_get_table_bill_list =
            '<?xml version="1.0" encoding="utf-8"?> \
				<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"> \
				  <soap:Body> \
					<of_get_table_bill xmlns="http://tempurl.org"> \
					  <as_outlet_cd>' + outlet + '</as_outlet_cd> \
					  <as_table_cd>' + SelectedsearchTable + '</as_table_cd> \
					  <adt_doc_date>2014-02-25</adt_doc_date> \
					  <as_status>A</as_status> \
					</of_get_table_bill> \
				  </soap:Body> \
				</soap:Envelope>';

        $.ajax({
            type: "POST",
            url: wsUrl_get_table_bill_list,
            contentType: "text/xml",
            dataType: "xml",
            data: soapRequest_get_table_bill_list,
            success: function (xmlHttpRequest, status, req) {
                // creates object instantce of XMLtoJSON
                var xml2json = new XMLtoJSON();
                var decoded_get_table_list = $("<div/>").html(req.responseText).text();

                //Replace empty member ID so that the ParseJson can be use
                var empty_member_id = "<member_id>                    </member_id>";
                if (decoded_get_table_list.indexOf(empty_member_id) != -1) {
                    decoded_get_table_list = decoded_get_table_list.replace("<member_id>                    </member_id>", "<member_id></member_id>");
                }

                var strjson_get_table_list = xml2json.fromStr(decoded_get_table_list, 'string');

                if (strjson_get_table_list == "Invalid XML format") {
                    $("#customerNumber").val('');
                    $("#merberId").val('');
                } else {
                    var parse_strjson_get_table_list = jQuery.parseJSON(strjson_get_table_list);
                    var cust_type = parse_strjson_get_table_list['ds_pt_table_bill']['ds_pt_table_bill_row']['cust_type']['#text'];

                    localStorage.setItem("bill_no", parse_strjson_get_table_list['ds_pt_table_bill']['ds_pt_table_bill_row']['bill_no']['#text']);
                    localStorage.setItem("member_id", parse_strjson_get_table_list['ds_pt_table_bill']['ds_pt_table_bill_row']['member_id']['#text']);
                    localStorage.setItem("waiter_cd", parse_strjson_get_table_list['ds_pt_table_bill']['ds_pt_table_bill_row']['waiter_cd']['#text']);
                    localStorage.setItem("sub_amt", parse_strjson_get_table_list['ds_pt_table_bill']['ds_pt_table_bill_row']['sub_amt']['#text']);
                    localStorage.setItem("status", parse_strjson_get_table_list['ds_pt_table_bill']['ds_pt_table_bill_row']['status']['#text']);
                    localStorage.setItem("cover", parse_strjson_get_table_list['ds_pt_table_bill']['ds_pt_table_bill_row']['cover']['#text']);
                    localStorage.setItem("SelectedsearchTable", SelectedsearchTable);

                    $("#customerNumber").val(parse_strjson_get_table_list['ds_pt_table_bill']['ds_pt_table_bill_row']['cover']['#text']);
                    $("#merberId").val(parse_strjson_get_table_list['ds_pt_table_bill']['ds_pt_table_bill_row']['member_id']['#text']);
                    $("#customerType").val(cust_type);
                    change_customerType();
                }

            },
            error: function (data, status) {
                alert(data.responseText);
            }
        });
    }
    
    function create_table_list_function() {
        /// <summary>
        /// 录入相关信息进行开台
        /// </summary>
        /// <param name="as_outlet_cd">销售点代码</param>
        /// <param name="as_station_cd">收银台代码</param>
        /// <param name="as_table_cd">餐桌代码</param>
        /// <param name="adt_doc_date">营业日期</param>
        /// <param name="adt_sys_date">客户端日期</param>
        /// <param name="as_cust_type">顾客类型V:普通客;M:会员R:酒店客;S:员工;O:其他</param>
        /// <param name="as_member_id">会员号码/员工号码/房间号码顾客类型为M/R/S时必输</param>
        /// <param name="ai_shift_issue">营业班次</param>
        /// <param name="as_meal_cd">膳食期间</param>
        /// <param name="ai_cover">人数</param>
        /// <param name="as_waiter_cd">服务员</param>
        /// <param name="as_logid">登陆用户</param>
        /// <returns>账单号</returns>

        var outlet = localStorage.getItem('outlet');
        var station = localStorage.getItem('station');
        var SelectedsearchTable = $("#searchTable :selected").val();
        var SelectedsearchTableText = $("#searchTable :selected").text().slice(0, -3);

        var create_bill_date = new Date();
        //convert month to 2 digits
        var twoDigitMonth = ((create_bill_date.getMonth().length + 1) === 1) ? (create_bill_date.getMonth() + 1) : '0' + (create_bill_date.getMonth() + 1);
        var SelectedcustomerType = $("#customerType :selected").val();
        var merberId = $("#merberId").val();
        var mealperiod = localStorage.getItem('mealperiod');
        var customerNumber = $("#customerNumber").val();
        var username = localStorage.getItem('username');

        if ($.isNumeric(customerNumber) && SelectedsearchTable > 0) {
            var wsUrl_get_create_table_list_list = "http://175.139.183.59:1002/webservice_posv5/n_webservice_posv5.asmx?op=of_create_table_bill";

            var soapRequest_get_create_table_list_list =
                '<?xml version="1.0" encoding="utf-8"?> \
			    <soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"> \
			      <soap:Body> \
				    <of_create_table_bill xmlns="http://tempurl.org"> \
				      <as_outlet_cd>' + outlet + '</as_outlet_cd> \
				      <as_station_cd>' + station + '</as_station_cd> \
				      <as_table_cd>' + SelectedsearchTable + '</as_table_cd> \
				      <adt_doc_date>2014-02-25</adt_doc_date> \
				      <adt_sys_date>' + create_bill_date.getFullYear() + '-' + twoDigitMonth + '-' + create_bill_date.getDate() + '</adt_sys_date> \
				      <as_cust_type>' + SelectedcustomerType + '</as_cust_type> \
				      <as_member_id>' + merberId + '</as_member_id> \
				      <ai_shift_issue>1</ai_shift_issue> \
				      <as_meal_cd>' + mealperiod + '</as_meal_cd> \
				      <ai_cover>' + customerNumber + '</ai_cover> \
				      <as_waiter_cd>' + username + '</as_waiter_cd> \
				      <as_logid>' + username + '</as_logid> \
				    </of_create_table_bill> \
			      </soap:Body> \
			    </soap:Envelope>';

            $.ajax({
                type: "POST",
                url: wsUrl_get_create_table_list_list,
                contentType: "text/xml",
                dataType: "xml",
                data: soapRequest_get_create_table_list_list,
                success: function (xmlHttpRequest, status, req) {
                    // creates object instantce of XMLtoJSON
                    var xml2json = new XMLtoJSON();
                    var decoded_get_table_list = $("<div/>").html(req.responseText).text();
                    var strjson_get_table_list = xml2json.fromStr(decoded_get_table_list, 'string');

                    if (strjson_get_table_list == "Invalid XML format") {
                        if ($.isNumeric(decoded_get_table_list)) {
                            //Update drop down list text
                            $("#searchTable :selected").text(SelectedsearchTableText + ' 占用');
                            localStorage.setItem("bill_no", decoded_get_table_list);
                        } else {
                            var decoded_get_table_list_arr = decoded_get_table_list.split("|");
                            alert(decoded_get_table_list_arr[1]);
                        }
                    } else {
                        alert('输入的餐桌不存在');
                    }

                },
                error: function (data, status) {
                    alert(data.responseText);
                }
            });
        } else {
            alert('请输入人数');
        }
    }

    //responsive code start
    var options = {
        $AutoPlay: false,                                   //[Optional] Whether to auto play, to enable slideshow, this option must be set to true, default value is false
        $AutoPlaySteps: 1,                                  //[Optional] Steps to go for each navigation request (this options applys only when slideshow disabled), the default value is 1
        $AutoPlayInterval: 4000,                            //[Optional] Interval (in milliseconds) to go for next slide since the previous stopped if the slider is auto playing, default value is 3000
        $PauseOnHover: 0,                                   //[Optional] Whether to pause when mouse over if a slider is auto playing, 0 no pause, 1 pause for desktop, 2 pause for touch device, 3 pause for desktop and touch device, default value is 3

        $ArrowKeyNavigation: true,   			            //[Optional] Allows keyboard (arrow key) navigation or not, default value is false
        $SlideDuration: 300,                                //[Optional] Specifies default duration (swipe) for slide in milliseconds, default value is 500
        $MinDragOffsetToSlide: 20,                          //[Optional] Minimum drag offset to trigger slide , default value is 20
        $SlideWidth: 120,                                   //[Optional] Width of every slide in pixels, default value is width of 'slides' container
        //$SlideHeight: 150,                                //[Optional] Height of every slide in pixels, default value is height of 'slides' container
        $SlideSpacing: 1, 					                //[Optional] Space between each slide in pixels, default value is 0
        $DisplayPieces: 3,                                  //[Optional] Number of pieces to display (the slideshow would be disabled if the value is set to greater than 1), the default value is 1
        $ParkingPosition: 0,                                //[Optional] The offset position to park slide (this options applys only when slideshow disabled), default value is 0.
        $UISearchMode: 1,                                   //[Optional] The way (0 parellel, 1 recursive, default value is 1) to search UI components (slides container, loading screen, navigator container, arrow navigator container, thumbnail navigator container etc).
        $PlayOrientation: 1,                                //[Optional] Orientation to play slide (for auto play, navigation), 1 horizental, 2 vertical, default value is 1
        $DragOrientation: 1,                                //[Optional] Orientation to drag slide, 0 no drag, 1 horizental, 2 vertical, 3 either, default value is 1 (Note that the $DragOrientation should be the same as $PlayOrientation when $DisplayPieces is greater than 1, or parking position is not 0)

        $BulletNavigatorOptions: {                          //[Optional] Options to specify and enable navigator or not
            $Class: $JssorBulletNavigator$,                 //[Required] Class to create navigator instance
            $ChanceToShow: 2,                               //[Required] 0 Never, 1 Mouse Over, 2 Always
            $AutoCenter: 0,                                 //[Optional] Auto center navigator in parent container, 0 None, 1 Horizontal, 2 Vertical, 3 Both, default value is 0
            $Steps: 1,                                      //[Optional] Steps to go for each navigation request, default value is 1
            $Lanes: 1,                                      //[Optional] Specify lanes to arrange items, default value is 1
            $SpacingX: 0,                                   //[Optional] Horizontal space between each item in pixel, default value is 0
            $SpacingY: 0,                                   //[Optional] Vertical space between each item in pixel, default value is 0
            $Orientation: 1                                 //[Optional] The orientation of the navigator, 1 horizontal, 2 vertical, default value is 1
        },

        $ArrowNavigatorOptions: {
            $Class: $JssorArrowNavigator$,                  //[Requried] Class to create arrow navigator instance
            $ChanceToShow: 2,                               //[Required] 0 Never, 1 Mouse Over, 2 Always
            $AutoCenter: 2,                                 //[Optional] Auto center navigator in parent container, 0 None, 1 Horizontal, 2 Vertical, 3 Both, default value is 0
            $Steps: 1                                       //[Optional] Steps to go for each navigation request, default value is 1
        }
    };

    //modify code
    function ScaleSlider() {
        var parentWidth = jssor_slider1.$Elmt.parentNode.clientWidth;
        //alert(parentWidth);
        if (parentWidth)
            jssor_slider1.$SetScaleWidth(parentWidth - 50);
        else
            $JssorUtils$.$Delay(ScaleSlider, 30);
    }

    //responsive code end

    function logout_function() {
        var txt_username = localStorage.getItem('username');
        var SelectedOutletCode = localStorage.getItem('outlet');
        var SelectedStationCode = localStorage.getItem('station');

        var wsUrl_get_logout_list = "http://175.139.183.59:1002/webservice_posv5/n_webservice_posv5.asmx?op=of_logout";

        var soapRequest_get_logout_list =
            '<?xml version="1.0" encoding="utf-8"?> \
                <soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"> \
                  <soap:Body> \
                    <of_logout xmlns="http://tempurl.org"> \
                      <as_outlet_cd>' + SelectedOutletCode + '</as_outlet_cd> \
                      <as_station_cd>' + SelectedStationCode + '</as_station_cd> \
                      <as_logid>' + txt_username + '</as_logid> \
                    </of_logout> \
                  </soap:Body> \
                </soap:Envelope>';

        $.ajax({
            type: "POST",
            url: wsUrl_get_logout_list,
            contentType: "text/xml",
            dataType: "xml",
            data: soapRequest_get_logout_list,
            success: function (xmlHttpRequest, status, req) {
                localStorage.clear();
                window.location.href = "index.html";
            },
            error: function (data, status) {
                alert(data.responseText);
            }
        });
    }

    //Function for order
    function create_order_item_function() {

        /// <summary>
        /// 点菜下单
        /// </summary>
        /// <param name="as_outlet_cd">销售点代码</param>
        /// <param name="as_station_cd">收银台代码</param>
        /// <param name="as_meal_cd">膳食期间*</param>
        /// <param name="as_bill_no">账单号</param>
        /// <param name="adt_doc_date">营业日期</param>
        /// <param name="as_cust_type">顾客类型</param>
        /// <param name="as_item_info">所点菜品信息格式：菜品1代码,数量|菜品2代码,数量|…样例:4063,1|2012,2|2109,1</param>
        /// <param name="as_remark">菜品备注</param>
        /// <param name="ai_shift">营业班次</param>
        /// <param name="as_logid">登陆用户</param>
        /// <returns>0	成功</returns>

        var txtCount = $("#txtCount").val();
        if (txtCount != "" && $.isNumeric(txtCount) == true) {
            if (confirm("确认下单吗?")) {
                var outlet = localStorage.getItem('outlet');
                var station = localStorage.getItem('station');
                var mealperiod = localStorage.getItem('mealperiod');
                var bill_no = localStorage.getItem('bill_no');
                var item_item_cd = localStorage.getItem('item_item_cd');
                var username = localStorage.getItem('username');
                var item_descs = localStorage.getItem('item_descs');
                var item_price = localStorage.getItem('item_price');
                var by_weight = localStorage.getItem('by_weight');

                var total_price = txtCount * item_price;

                var exist_item_info = item_info;
                var exist_item_info_cd = item_info_cd;
                
                if (jQuery.inArray(item_item_cd, exist_item_info_cd) == "-1") {
                    item_info_cd.push(item_item_cd);
                    item_info[item_item_cd] = [];

                    item_info[item_item_cd].push({
                        "item_cd": item_item_cd,
                        "descs": item_descs,
                        "price": item_price,
                        "qty": txtCount,
                        "trx_amt": total_price,
                        "weight": by_weight,
                        "takeaway": "N",
                        "tax_surcharge": "0",
                        "total_tax_amt": "0"
                    });
                } else {
                    var new_qty = parseFloat(txtCount) + parseFloat(item_info[item_item_cd][0]['qty']);
                    var new_trx_amt = parseFloat(total_price) + parseFloat(item_info[item_item_cd][0]['trx_amt']);
                    var new_weight = parseFloat(by_weight) + parseFloat(item_info[item_item_cd][0]['weight']);
                    item_info[item_item_cd][0]['qty'] = new_qty;
                    item_info[item_item_cd][0]['trx_amt'] = new_trx_amt;
                    item_info[item_item_cd][0]['weight'] = new_weight;
                }
                var exist_total_order_items = localStorage.getItem('total_order_items');
                if (localStorage.getItem("total_order_items") === null) {
                    exist_total_order_items = 0;
                }

                var total_order_items = parseFloat(exist_total_order_items) + parseFloat(txtCount);
                localStorage.setItem("total_order_items", total_order_items);

                alert('点菜成功');
                
                $("#txtCount").val("");
                $("#div_order").popup("close");
            }
        } else {
            alert("请输入份数");
        }
    }
    //End Function for order

    $(document).ready(function () {
        var exist_item_info = localStorage.getItem('item_info');
        var exist_item_info_cd = localStorage.getItem('item_info_cd');

        if (typeof exist_item_info !== 'undefined' && exist_item_info !== null) {
            var exist_item_info_arr = JSON.parse(localStorage["item_info"]);
            item_info = exist_item_info_arr;
        }

        if (typeof exist_item_info_cd !== 'undefined' && exist_item_info_cd !== null) {
            var exist_item_info_cd_arr = JSON.parse(localStorage["item_info_cd"]);
            item_info_cd = exist_item_info_cd_arr;
        }

        getoutlet_meal_majorList();

        //remove all option before added in new one
        $('#searchTable option').remove();
        getTableList();
    });
</script>